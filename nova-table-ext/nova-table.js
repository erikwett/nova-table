define(["./supernova","./extDefinition"],function(e,t){"use strict";e=e&&e.hasOwnProperty("default")?e.default:e,t=t&&t.hasOwnProperty("default")?t.default:t;
/*
  * @nebula.js/supernova v0.1.0-alpha.15
  * Copyright (c) 2019 QlikTech International AB
  * Released under the MIT license.
  */
var n={};function i(){i.init.call(this)}n.isObject=function(e){return"object"==typeof e&&null!==e},n.isNumber=function(e){return"number"==typeof e},n.isUndefined=function(e){return void 0===e},n.isFunction=function(e){return"function"==typeof e};var s=i;i.EventEmitter=i,i.prototype._events=void 0,i.prototype._maxListeners=void 0,i.defaultMaxListeners=10,i.init=function(){this._events=this._events||{},this._maxListeners=this._maxListeners||void 0},i.prototype.setMaxListeners=function(e){if(!n.isNumber(e)||e<0||isNaN(e))throw TypeError("n must be a positive number");return this._maxListeners=e,this},i.prototype.emit=function(e){var t,i,s,r,o,c;if(this._events||(this._events={}),"error"===e&&!this._events.error)throw(t=arguments[1])instanceof Error?t:Error('Uncaught, unspecified "error" event.');if(i=this._events[e],n.isUndefined(i))return!1;if(n.isFunction(i))switch(arguments.length){case 1:i.call(this);break;case 2:i.call(this,arguments[1]);break;case 3:i.call(this,arguments[1],arguments[2]);break;default:for(s=arguments.length,r=new Array(s-1),o=1;o<s;o++)r[o-1]=arguments[o];i.apply(this,r)}else if(n.isObject(i)){for(s=arguments.length,r=new Array(s-1),o=1;o<s;o++)r[o-1]=arguments[o];for(s=(c=i.slice()).length,o=0;o<s;o++)c[o].apply(this,r)}return!0},i.prototype.addListener=function(e,t){var s;if(!n.isFunction(t))throw TypeError("listener must be a function");(this._events||(this._events={}),this._events.newListener&&this.emit("newListener",e,n.isFunction(t.listener)?t.listener:t),this._events[e]?n.isObject(this._events[e])?this._events[e].push(t):this._events[e]=[this._events[e],t]:this._events[e]=t,n.isObject(this._events[e])&&!this._events[e].warned)&&((s=n.isUndefined(this._maxListeners)?i.defaultMaxListeners:this._maxListeners)&&s>0&&this._events[e].length>s&&(this._events[e].warned=!0,n.isFunction(console.error)&&console.error("(node) warning: possible EventEmitter memory leak detected. %d listeners added. Use emitter.setMaxListeners() to increase limit.",this._events[e].length),n.isFunction(console.trace)&&console.trace()));return this},i.prototype.on=i.prototype.addListener,i.prototype.once=function(e,t){if(!n.isFunction(t))throw TypeError("listener must be a function");var i=!1;function s(){this.removeListener(e,s),i||(i=!0,t.apply(this,arguments))}return s.listener=t,this.on(e,s),this},i.prototype.removeListener=function(e,t){var i,s,r,o;if(!n.isFunction(t))throw TypeError("listener must be a function");if(!this._events||!this._events[e])return this;if(r=(i=this._events[e]).length,s=-1,i===t||n.isFunction(i.listener)&&i.listener===t)delete this._events[e],this._events.removeListener&&this.emit("removeListener",e,t);else if(n.isObject(i)){for(o=r;o-- >0;)if(i[o]===t||i[o].listener&&i[o].listener===t){s=o;break}if(s<0)return this;1===i.length?(i.length=0,delete this._events[e]):i.splice(s,1),this._events.removeListener&&this.emit("removeListener",e,t)}return this},i.prototype.removeAllListeners=function(e){var t,i;if(!this._events)return this;if(!this._events.removeListener)return 0===arguments.length?this._events={}:this._events[e]&&delete this._events[e],this;if(0===arguments.length){for(t in this._events)"removeListener"!==t&&this.removeAllListeners(t);return this.removeAllListeners("removeListener"),this._events={},this}if(i=this._events[e],n.isFunction(i))this.removeListener(e,i);else if(Array.isArray(i))for(;i.length;)this.removeListener(e,i[i.length-1]);return delete this._events[e],this},i.prototype.listeners=function(e){return this._events&&this._events[e]?n.isFunction(this._events[e])?[this._events[e]]:this._events[e].slice():[]},i.listenerCount=function(e,t){return e._events&&e._events[t]?n.isFunction(e._events[t])?1:e._events[t].length:0};const r=e=>t=>{const n=(e=>(Object.keys(s.prototype).forEach(t=>{e[t]=s.prototype[t]}),s.init(e),e))(Object.assign({},t,{action(){"function"==typeof t.action&&t.action.call(n,e),n.emit("changed")},enabled:()=>"function"!=typeof t.enabled||t.enabled.call(n,e),active:"function"==typeof t.active?function(){return t.active.call(n,e)}:void 0}));return n};const o={app:null,model:null,actions:null,selections:null,created:()=>{},mounted:()=>{},render:()=>{},resize:()=>{},willUnmount:()=>{},destroy:()=>{},emit:()=>{},getViewState:()=>{},setSnapshotData:e=>Promise.resolve(e)},c=Object.keys(o),a=e=>(Object.keys(s.prototype).forEach(t=>{e[t]=s.prototype[t]}),s.init(e),e);function l(e,t){const n={...o};a(n);const i={emit(...e){n.emit(...e)}};Object.keys(e.component||{}).forEach(t=>{-1!==c.indexOf(t)?n[t]=e.component[t].bind(i):i[t]=e.component[t]});const s=function({sn:e,component:t}){const n={},i=[],s=r(t);return((e.definition.selectionToolbar||{}).items||[]).forEach(e=>{const t=s(e);n[e.key]=t,i.push(t)}),(e.definition.actions||[]).forEach(e=>{const t=s(e);n[e.key]=t}),{actions:n,selectionToolbarItems:i,destroy(){i.length=0}}}({sn:e,component:i});return Object.assign(i,{model:t.model,app:t.app,selections:t.selections,actions:s.actions}),Object.assign(n,{actions:s.actions,model:t.model,app:t.app,selections:t.selections}),{generator:e,component:n,selectionToolbar:{items:s.selectionToolbarItems},logicalSize:e.definition.logicalSize||(()=>!1)}}var h={get:e=>`$$$${e}$$$`};const p=()=>{};function u(e,t){return void 0===e?()=>t:()=>e}function v(e={}){return{min:"function"==typeof e.min?e.min:u(e.min,0),max:"function"==typeof e.max?e.max:u(e.max,1e3),add:e.add||p,description:e.description||p,move:e.move||p,remove:e.remove||p,replace:e.replace||p}}function f(e){return{path:e.path||"/qHyperCubeDef",dimensions:v(e.dimensions),measures:v(e.measures)}}function m(e={}){return{properties:{...e.properties},data:{targets:((e.data||{}).targets||[]).map(f)}}}const d={STATIC:0,ANALYSIS:1,EDIT:2};function _(e,t){const n=[];return function(e){return!!e.tooltips||e.interactionState===d.ANALYSIS&&!1!==e.tooltips}(e)&&n.push("passive"),e.interactionState===d.ANALYSIS&&!1!==e.tooltips&&!0!==e.limitedInteraction&&n.push("interact"),t.isSnapshot||(!1!==e.selections&&n.push("select"),n.push("fetch")),n}var y={};function b(){b.init.call(this)}y.isObject=function(e){return"object"==typeof e&&null!==e},y.isNumber=function(e){return"number"==typeof e},y.isUndefined=function(e){return void 0===e},y.isFunction=function(e){return"function"==typeof e};var L=b;b.EventEmitter=b,b.prototype._events=void 0,b.prototype._maxListeners=void 0,b.defaultMaxListeners=10,b.init=function(){this._events=this._events||{},this._maxListeners=this._maxListeners||void 0},b.prototype.setMaxListeners=function(e){if(!y.isNumber(e)||e<0||isNaN(e))throw TypeError("n must be a positive number");return this._maxListeners=e,this},b.prototype.emit=function(e){var t,n,i,s,r,o;if(this._events||(this._events={}),"error"===e&&!this._events.error)throw(t=arguments[1])instanceof Error?t:Error('Uncaught, unspecified "error" event.');if(n=this._events[e],y.isUndefined(n))return!1;if(y.isFunction(n))switch(arguments.length){case 1:n.call(this);break;case 2:n.call(this,arguments[1]);break;case 3:n.call(this,arguments[1],arguments[2]);break;default:for(i=arguments.length,s=new Array(i-1),r=1;r<i;r++)s[r-1]=arguments[r];n.apply(this,s)}else if(y.isObject(n)){for(i=arguments.length,s=new Array(i-1),r=1;r<i;r++)s[r-1]=arguments[r];for(i=(o=n.slice()).length,r=0;r<i;r++)o[r].apply(this,s)}return!0},b.prototype.addListener=function(e,t){var n;if(!y.isFunction(t))throw TypeError("listener must be a function");(this._events||(this._events={}),this._events.newListener&&this.emit("newListener",e,y.isFunction(t.listener)?t.listener:t),this._events[e]?y.isObject(this._events[e])?this._events[e].push(t):this._events[e]=[this._events[e],t]:this._events[e]=t,y.isObject(this._events[e])&&!this._events[e].warned)&&((n=y.isUndefined(this._maxListeners)?b.defaultMaxListeners:this._maxListeners)&&n>0&&this._events[e].length>n&&(this._events[e].warned=!0,y.isFunction(console.error)&&console.error("(node) warning: possible EventEmitter memory leak detected. %d listeners added. Use emitter.setMaxListeners() to increase limit.",this._events[e].length),y.isFunction(console.trace)&&console.trace()));return this},b.prototype.on=b.prototype.addListener,b.prototype.once=function(e,t){if(!y.isFunction(t))throw TypeError("listener must be a function");var n=!1;function i(){this.removeListener(e,i),n||(n=!0,t.apply(this,arguments))}return i.listener=t,this.on(e,i),this},b.prototype.removeListener=function(e,t){var n,i,s,r;if(!y.isFunction(t))throw TypeError("listener must be a function");if(!this._events||!this._events[e])return this;if(s=(n=this._events[e]).length,i=-1,n===t||y.isFunction(n.listener)&&n.listener===t)delete this._events[e],this._events.removeListener&&this.emit("removeListener",e,t);else if(y.isObject(n)){for(r=s;r-- >0;)if(n[r]===t||n[r].listener&&n[r].listener===t){i=r;break}if(i<0)return this;1===n.length?(n.length=0,delete this._events[e]):n.splice(i,1),this._events.removeListener&&this.emit("removeListener",e,t)}return this},b.prototype.removeAllListeners=function(e){var t,n;if(!this._events)return this;if(!this._events.removeListener)return 0===arguments.length?this._events={}:this._events[e]&&delete this._events[e],this;if(0===arguments.length){for(t in this._events)"removeListener"!==t&&this.removeAllListeners(t);return this.removeAllListeners("removeListener"),this._events={},this}if(n=this._events[e],y.isFunction(n))this.removeListener(e,n);else if(Array.isArray(n))for(;n.length;)this.removeListener(e,n[n.length-1]);return delete this._events[e],this},b.prototype.listeners=function(e){return this._events&&this._events[e]?y.isFunction(this._events[e])?[this._events[e]]:this._events[e].slice():[]},b.listenerCount=function(e,t){return e._events&&e._events[t]?y.isFunction(e._events[t])?1:e._events[t].length:0};var g=e=>{const t={begin(){e.selectionsApi.activated(),e.backendApi.beginSelections(),t.emit("activated")},clear(){e.backendApi.model.resetMadeSelections()},confirm(){e.selectionsApi.confirm()},cancel(){e.selectionsApi.cancel()},select(t){"resetMadeSelections"===t.method||e.selectionsApi.selectionsMade||e.backendApi.beginSelections(),e.backendApi.model[t.method](...t.params).then(t=>{t||(e.selectionsApi.selectionsMade=!1,this.clear())}),e.selectionsApi.selectionsMade="resetMadeSelections"!==t.method},isActive:()=>e.selectionsApi.active,refreshToolbar(){e.selectionsApi.refreshToolbar()}};return(e=>(Object.keys(L.prototype).forEach(t=>{e[t]=L.prototype[t]}),L.init(e),e))(t),e.selectionsApi.confirm=()=>{e.backendApi.endSelections(!0).then(()=>{e.selectionsApi.deactivated(),t.emit("deactivated")})},e.selectionsApi.clear=()=>{e.backendApi.clearSelections(),e.selectionsApi.selectionsMade=!1,t.emit("cleared")},e.selectionsApi.cancel=()=>{e.backendApi.endSelections(!1),e.selectionsApi.deactivated(),t.emit("canceled")},t};const A={Promise:Promise},w=function(e,t){let n;const i={translator:h,Promise:Promise,...t},s={qae:m((n="function"==typeof e?e(i):e).qae),component:n.component||{},create:e=>l(s,e),definition:{}};return Object.keys(n).forEach(e=>{s[e]||(s.definition[e]=n[e])}),s}(e,A);return{definition:{type:"items",component:"accordion",items:{data:{uses:"data"}}},support:{export:!1,exportData:!1,snapshot:!1,viewData:!1},..."function"==typeof t?t(A):t,initialProperties:w.qae.properties,importProperties:null,exportProperties:null,template:'<div style="height: 100%;position: relative"></div>',mounted(e){const t=e[0].children[0],n=g(this.$scope),i=w.create({model:this.backendApi.model,app:this.backendApi.model.session.app,selections:n});this.snComponent=i.component,this.snComponent.created({options:this.options||{}}),this.snComponent.mounted(t)},paint(e,t){return this.snComponent.render({layout:t,context:{permissions:_(this.options,this.backendApi)}})},destroy(){this.snComponent&&(this.snComponent.willUnmount(),this.snComponent.destroy())}}});
//# sourceMappingURL=nova-table.js.map
